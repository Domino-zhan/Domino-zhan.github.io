<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>STM32标准库_01 | 搭建自己的程序框架</title>
    <link href="/2020/06/07/hello-world/"/>
    <url>/2020/06/07/hello-world/</url>
    
    <content type="html"><![CDATA[<p>本篇文章主要介绍本人早期的基于STM32标准库的程序框架，希望能给人以收获。</p><h2 id="1-开发环境"><a href="#1-开发环境" class="headerlink" title="1.开发环境"></a>1.开发环境</h2><h3 id="软件环境"><a href="#软件环境" class="headerlink" title="软件环境"></a>软件环境</h3><p>使用MDK5.25版本，芯片包为STM32F1系列。</p><h3 id="硬件环境"><a href="#硬件环境" class="headerlink" title="硬件环境"></a>硬件环境</h3><p>开发板：一块STM32F103C8T6开发板（FLASH:64kBytes,RAM:20kBytes），是一款中等容量的芯片。</p><p>烧录器：STlink或者Jlink。</p><h2 id="2-工程创建"><a href="#2-工程创建" class="headerlink" title="2.工程创建"></a>2.工程创建</h2><h4 id="创建文件夹"><a href="#创建文件夹" class="headerlink" title="创建文件夹"></a>创建文件夹</h4><p>现在本地文件夹下创建4个文件夹，分别是APP（存放应用层代码），LIB（存放STM32标准库相关文件），CORE（存放STM内核与启动文件等），Project(存放工程相关文件)。</p><p><img src="/images/stm32_01/1.png" srcset="/img/loading.gif" alt=""></p><h4 id="创建工程"><a href="#创建工程" class="headerlink" title="创建工程"></a>创建工程</h4><p>在MDK中新建工程，保存到刚刚创建的本地文件夹下的Project文件夹中，并选择STM32F103芯片。</p><p><img src="/images/stm32_01/2.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/3.png" srcset="/img/loading.gif" alt=""></p><p>后面会弹出选择其他驱动组件的界面，直接选择取消。</p><p><img src="/images/stm32_01/4.png" srcset="/img/loading.gif" alt=""></p><p>接着直接用正点原子战舰板资料（推荐下载，软硬件资料很全）里面的v3.5固件库，把工程需要的文件拷贝到本地文件夹中，如图示主要是拷贝到CORE和LIB文件夹。</p><p><img src="/images/stm32_01/5.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/6.png" srcset="/img/loading.gif" alt=""></p><p>我们的LIB文件夹直接拷贝STM32战舰的参考资料\STM32F1xx固件库\STM32F10x_StdPeriph_Lib_V3.5.0\Libraries\STM32F10x_StdPeriph_Driver文件夹下的inc和src这两个文件夹。</p><p><img src="/images/stm32_01/7.png" srcset="/img/loading.gif" alt=""></p><h4 id="在MDK中导入我们的文件夹结构"><a href="#在MDK中导入我们的文件夹结构" class="headerlink" title="在MDK中导入我们的文件夹结构"></a>在MDK中导入我们的文件夹结构</h4><p><img src="/images/stm32_01/8.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/9.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/10.png" srcset="/img/loading.gif" alt=""><br>在本地APP文件夹中添加main.c等文件夹（记得勾选显示文件拓展名），再添加到MDK中。<br><img src="/images/stm32_01/11.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/12.png" srcset="/img/loading.gif" alt=""></p><p>最后要指定一下头文件路径和添加全局属性的宏定义。</p><p><img src="/images/stm32_01/13.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/14.png" srcset="/img/loading.gif" alt=""></p><h2 id="3-编写代码"><a href="#3-编写代码" class="headerlink" title="3.编写代码"></a>3.编写代码</h2><p>打开main.c添加main函数并编译</p><p><img src="/images/stm32_01/15.png" srcset="/img/loading.gif" alt=""></p><h3 id="框架代码编写"><a href="#框架代码编写" class="headerlink" title="框架代码编写"></a>框架代码编写</h3><p>（1）系统时基</p><p>当我们拿到一块STM板子的时候，我们得看它的外部晶振是多少M的（一般用8M的外部晶振），如果不是8M的晶振就需要修改stm32f10x.h和system_stm32f10x,c里的SetSysClockTo72()函数共两处地方。</p><p><img src="/images/stm32_01/16.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/17.png" srcset="/img/loading.gif" alt=""></p><p>开始编写systick.c和systick.h文件。</p><p><img src="/images/stm32_01/18.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/19.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/20.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/21.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/22.png" srcset="/img/loading.gif" alt=""></p><p>（2）编写LED程序用于测试</p><p>原理图<br><img src="/images/stm32_01/23.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/24.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/25.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/26.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/27.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/28.png" srcset="/img/loading.gif" alt=""></p><h3 id="程序下载"><a href="#程序下载" class="headerlink" title="程序下载"></a>程序下载</h3><p><img src="/images/stm32_01/29.png" srcset="/img/loading.gif" alt=""></p><p><img src="/images/stm32_01/30.png" srcset="/img/loading.gif" alt=""></p><h3 id="实验现象"><a href="#实验现象" class="headerlink" title="实验现象"></a>实验现象</h3><p><img src="/images/stm32_01/31.jpg" srcset="/img/loading.gif" alt=""></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
